<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Zen Board JS</title>

    <script type="text/javascript" src="jquery-1.11.1.min.js"></script>
    <!--<script type="text/javascript" src="http://code.jquery.com/jquery-1.5.2.js"></script>-->
    <!--<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>-->
    <!--<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.4.min.js"></script>-->
    <!--<script type="text/javascript" src="https://code.jquery.com/jquery-3.1.0.min.js"></script>-->

    <!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.js"></script>-->

    <style type="text/css">
        .board {
            position:absolute;
            top: 50px;
            left:50px;
        }

        .tile {
            width:100px;
            height:100px;
            border-spacing: 0;
            background-color:black;
            position:absolute;
        }
        .rot90 {
            -webkit-transform: rotate(90deg);
            -moz-transform: rotate(90deg);
            transform: rotate(90deg);
        }
        .rot180 {
            -webkit-transform: rotate(180deg);
            -moz-transform: rotate(180deg);
            transform: rotate(180deg);
        }
        .rot270 {
            -webkit-transform: rotate(270deg);
            -moz-transform: rotate(270deg);
            transform: rotate(270deg);
        }

        .row0 {
            top:0px;
        }
        .row1 {
            top:100px;
        }
        .row2 {
            top:200px;
        }
        .row3 {
            top:300px;
        }
        .row4 {
            top:400px;
        }
        .row5 {
            top:500px;
        }

        .col0 {
            left:px;
        }
        .col1 {
            left:100px;
        }
        .col2 {
            left:200px;
        }
        .col3 {
            left:300px;
        }
        .col4 {
            left:400px;
        }
        .col5 {
            left:500px;
        }

        .reverse {
            /* empty class meaning it rotates CCW */
        }

    </style>

    <script type="text/javascript">
        function setRotation(obj, deg) {
            obj.css('-webkit-transform','rotate(' + deg + 'deg)');
            obj.css('-moz-transform','rotate(' + deg + 'deg)');
            obj.css('transform','rotate(' + deg + 'deg)');
        }

        function rotate(id, deg) {
            $(id).each(function () {
                var current = getRotationDegrees($(this))
                current = (current < 0) ? current + 360 : current;

                // avoid spinning from 360 back to 90 when we want 0 to 90
                if (deg < 0 && (current == 360 || current == 0)) {
                    current = 0;
                    setRotation($(this), 0);
                }

                var target = current + deg;
                console.log($(this).attr('id') + ": " + current + " -> " + target);
                $(this).animate({ degrees: target}, {
                    step: function(now, fx) {
                        console.log($(this).attr('id') + ": " + now);
                        //setRotation($(this), deg);
                        $(this).css('-webkit-transform','rotate('+now+'deg)');
                        $(this).css('-moz-transform','rotate('+now+'deg)');
                        $(this).css('transform','rotate('+now+'deg)');
                    },
                    duration:'slow'
                }, 'linear');
            });
        }

        function rotateGroup(groupClass, deg) {
            rotate(groupClass + ":not(.reverse)", deg);
            rotate(groupClass + ".reverse", -deg);
        }

        function rotateGroupRepeat(groupClass, deg) {
            rotateGroup(groupClass, deg);
            setTimeout(function() {
                rotateGroupRepeat(groupClass, deg + 90);
            }, 500);
        }

        // some genius at http://stackoverflow.com/questions/8270612/get-element-moz-transformrotate-value-in-jquery
        function getRotationDegrees(obj) {
            var matrix = obj.css("-webkit-transform") ||
                    obj.css("-moz-transform")    ||
                    obj.css("-ms-transform")     ||
                    obj.css("-o-transform")      ||
                    obj.css("transform");
            if(matrix !== 'none') {
                var values = matrix.split('(')[1].split(')')[0].split(',');
                var a = values[0];
                var b = values[1];
                var angle = Math.round(Math.atan2(b, a) * (180/Math.PI));
            } else { var angle = 0; }
            //return (angle < 0) ? angle + 360 : angle;
            return angle;
        }

        $( document ).ready(function() {
            var id = '#tile00';

            setTimeout(function(){
                setRotation($(id), 90);
                var current = getRotationDegrees($(id));
                console.log("set to " + current);
            }, 500);
            setTimeout(function(){
                rotate(id, 360);
            }, 2500);

            /*
            setTimeout(function(){
                rotate(id, 90);
            }, 500);
            setTimeout(function(){
                rotate(id, 90);
            }, 2500);
            setTimeout(function(){
                rotate(id, 90);
            }, 4500);
            setTimeout(function(){
                rotate(id, 90);
            }, 6500);
            setTimeout(function(){
                rotate(id, 90);
            }, 8500);
            setTimeout(function(){
                rotate(id, 90);
            }, 10500);
            */

//            rotateGroupRepeat('.groupA', 90);
//            rotateGroupRepeat('.groupE', 90);
//            rotateGroupRepeat('.groupF', 90);
//            rotateGroupRepeat('.groupB', 90);
//            rotateGroupRepeat('.groupC', 90);
//            rotateGroupRepeat('.groupD', 90);

            /*
            setTimeout(function(){
                rotateGroup('.groupA', 180);
            }, 500);
            setTimeout(function(){
                rotateGroup('.groupB', 180);
            }, 1000);
            setTimeout(function(){
                rotateGroup('.groupC', 180);
            }, 1500);
            setTimeout(function(){
                rotateGroup('.groupD', 180);
            }, 2000);
            setTimeout(function(){
                rotateGroup('.groupE', 180);
            }, 2500);
            setTimeout(function(){
                rotateGroup('.groupF', 180);
            }, 3000);
            */

        });
    </script>

</head>
<body>


<div class="board">
<img id="tile00" class="tile row0 col0 groupC" src="zen_tile.png">
<img id="tile01" class="tile row0 col1 groupD rot90 reverse" src="zen_tile.png">
<img id="tile02" class="tile row0 col2 groupE" src="zen_tile.png">
<img id="tile03" class="tile row0 col3 groupE rot90 reverse" src="zen_tile.png">
<img id="tile04" class="tile row0 col4 groupD" src="zen_tile.png">
<img id="tile05" class="tile row0 col5 groupC rot90 reverse" src="zen_tile.png">

<img id="tile10" class="tile row1 col0 groupD rot270" src="zen_tile.png">
<img id="tile11" class="tile row1 col1 groupB rot180 reverse" src="zen_tile.png">
<img id="tile12" class="tile row1 col2 groupF rot270" src="zen_tile.png">
<img id="tile13" class="tile row1 col3 groupF rot180 reverse" src="zen_tile.png">
<img id="tile14" class="tile row1 col4 groupB rot270" src="zen_tile.png">
<img id="tile15" class="tile row1 col5 groupD rot180 reverse" src="zen_tile.png">

<img id="tile20" class="tile row2 col0 groupE reverse" src="zen_tile.png">
<img id="tile21" class="tile row2 col1 groupF rot90 reverse" src="zen_tile.png">
<img id="tile22" class="tile row2 col2 groupA" src="zen_tile.png">
<img id="tile23" class="tile row2 col3 groupA rot90 reverse" src="zen_tile.png">
<img id="tile24" class="tile row2 col4 groupF" src="zen_tile.png">
<img id="tile25" class="tile row2 col5 groupE rot90" src="zen_tile.png">

<img id="tile30" class="tile row3 col0 groupE rot270" src="zen_tile.png">
<img id="tile31" class="tile row3 col1 groupF rot180" src="zen_tile.png">
<img id="tile32" class="tile row3 col2 groupA rot270 reverse" src="zen_tile.png">
<img id="tile33" class="tile row3 col3 groupA rot180" src="zen_tile.png">
<img id="tile34" class="tile row3 col4 groupF rot270 reverse" src="zen_tile.png">
<img id="tile35" class="tile row3 col5 groupE rot180 reverse" src="zen_tile.png">

<img id="tile40" class="tile row4 col0 groupD reverse" src="zen_tile.png">
<img id="tile41" class="tile row4 col1 groupB rot90" src="zen_tile.png">
<img id="tile42" class="tile row4 col2 groupF reverse" src="zen_tile.png">
<img id="tile43" class="tile row4 col3 groupF rot90" src="zen_tile.png">
<img id="tile44" class="tile row4 col4 groupB reverse" src="zen_tile.png">
<img id="tile45" class="tile row4 col5 groupD rot90" src="zen_tile.png">

<img id="tile50" class="tile row5 col0 groupC rot270 reverse" src="zen_tile.png">
<img id="tile51" class="tile row5 col1 groupD rot180" src="zen_tile.png">
<img id="tile52" class="tile row5 col2 groupE rot270 reverse" src="zen_tile.png">
<img id="tile53" class="tile row5 col3 groupE rot180" src="zen_tile.png">
<img id="tile54" class="tile row5 col4 groupD rot270 reverse" src="zen_tile.png">
<img id="tile55" class="tile row5 col5 groupC rot180" src="zen_tile.png">
</div>

</body>
</html>
